@using BusServiceApplication.Shared;

@inject StudentService studentServices;

<h2 class="text-center">Students Under Parent</h2>

<table class="table table-hover text-uppercase mx-auto">
    <thead class="table-primary">
        <!-- Table header row -->
        <tr class="text-center">
            <th>Name</th>
            <th>Surname</th>
            <th>Cellphone Number</th>
            <th>Grade</th>
            <th style="width: 10%;">Update Details</th>
            <th style="width: 10%;">Delete Student</th>
            <!-- Add more header cells as needed -->
        </tr>
    </thead>
    <tbody>
        <!-- Table body rows -->
        @foreach (var item in ListOfStudentsUnderParent)
        {
            <tr class="text-center">
                <td>@item.Name</td>
                <td>@item.Surname</td>
                <td>@item.CellphoneNumber</td>
                <td>@item.Grade</td>
                <td><button class="btn btn-primary">Update</button></td>
                <td><button class="btn btn-primary">Delete</button></td>
            </tr>
        }
    </tbody>
</table>

@code {
    public List<StudentDetails> ListOfStudentsUnderParent { get; set; }

    // Setting the parentID property for the parent page
    [Parameter]
    public int ParentID { get; set; }

    // This code will run when the page is loaded. Allowing us to set up data on load
    protected override async Task OnInitializedAsync()
    {
        ListOfStudentsUnderParent = studentServices.getAllStudentsUnderLoggedInParent(ParentID);
        // All methods that should run on load
    }
}
