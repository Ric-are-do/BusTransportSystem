@inject AdministratorServices administratorServices
@inject StudentService studentsServices;
@inject BusRoutServices busRoutServices;



<h1> Daily MIS reports </h1>
<h2> List of students on a particular day  </h2>

@*need to display all 3 busses on a particulr day *@
<h1> bus  Trip </h1>

<div class="container mt-4">
    <div class="border">
        <table class="table table-striped table-hover table-sm ">
            <thead class="table-primary">
                <tr>
                    <th>childID</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Greade</th>
                    <th>CellNumber</th>
                    <th>Area</th>
                    <th>Bus Number</th>
                    <th>Start Date</th>
                    <th>End Date</th>

                </tr>
            </thead>
            <tbody>
                <!-- Table body rows for Morning -->
                @foreach (var MorningItem in studnetsOnMorningBus)
                {
                    <tr>
                        <td>@MorningItem.ChildUserNameId</td>
                        <td>@childUserName(MorningItem.ChildUserNameId).Name</td>
                        <td>@childUserName(MorningItem.ChildUserNameId).Surname</td>
                        <td>@childUserName(MorningItem.ChildUserNameId).Grade</td>
                        <td>@childUserName(MorningItem.ChildUserNameId).CellphoneNumber</td>
                        <td>@MorningItem.Area</td>
                        <td>@MorningItem.BusNumber</td>
                        <td>@MorningItem.TakingBusStartDate</td>
                        <td>@MorningItem.TakingBusEndDate</td>

                    </tr>
                }
            </tbody>
        </table>
    </div>
    <h1> Afternoon list </h1>
    <div class="border mt-4">
        <table class="table  table-striped table-hover">
            <thead class="table-primary">
                <tr>
                    <th>childID</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Greade</th>
                    <th>CellNumber</th>
                    <th>Area</th>
                    <th>Bus Number</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                </tr>
            </thead>
            <tbody>
                <!-- Table body rows for Afternoon -->
                @foreach (var AfternoonItem in studentsOnAfternoonBus)
                {
                    <tr>
                        <td>@AfternoonItem.ChildUserNameId</td>
                        <td>@childUserName(AfternoonItem.ChildUserNameId).Name</td>
                        <td>@childUserName(AfternoonItem.ChildUserNameId).Surname</td>
                        <td>@childUserName(AfternoonItem.ChildUserNameId).Grade</td>
                        <td>@childUserName(AfternoonItem.ChildUserNameId).CellphoneNumber</td>
                        <td>@AfternoonItem.Area</td>
                        <td>@AfternoonItem.BusNumber</td>
                        <td>@AfternoonItem.TakingBusStartDate</td>
                        <td>@AfternoonItem.TakingBusEndDate</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>


@code {

    public List<BusDetailsMorning> studnetsOnMorningBus = new List<BusDetailsMorning>();
    public List<BusDetailsAfternoon> studentsOnAfternoonBus = new List<BusDetailsAfternoon>();
    public List<StudentDetails> studnetDetails = new List<StudentDetails>();
    public StudentDetails thisStudent = new StudentDetails();


    protected override async Task OnInitializedAsync()
    {
        studnetsOnMorningBus = busRoutServices.GetListOfStudentsOnMorningBus();
        studentsOnAfternoonBus = busRoutServices.GetListOfStudentsOnAfternoonBus();
    }

    public StudentDetails childUserName(string userName)
    {
        var thisStudentsDetails = studentsServices.GetStudentObjectByChildUserNameID(userName);
        return thisStudentsDetails;

    }


}
